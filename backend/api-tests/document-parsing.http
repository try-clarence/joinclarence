### Clarence AI Backend - Document Parsing API Tests
### Base URL
@baseUrl = http://localhost:3000/api/v1

###############################################
### 1. Parse DEC Page (PDF Upload)
###############################################

### Upload a PDF file for parsing
# Note: Replace the file path with your actual PDF file
POST {{baseUrl}}/document-parsing/parse-decpage
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="business-document.pdf"
Content-Type: application/pdf

< ./test-files/sample-business.pdf
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###############################################
### Alternative: Upload with base64 content
###############################################

### Upload PDF with inline content (for testing without actual file)
POST {{baseUrl}}/document-parsing/parse-decpage
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test-document.pdf"
Content-Type: application/pdf

%PDF-1.4
1 0 obj
<<
/Type /Catalog
/Pages 2 0 R
>>
endobj
2 0 obj
<<
/Type /Pages
/Kids [3 0 R]
/Count 1
>>
endobj
3 0 obj
<<
/Type /Page
/Parent 2 0 R
/MediaBox [0 0 612 792]
/Contents 4 0 R
>>
endobj
4 0 obj
<<
/Length 44
>>
stream
BT
/F1 12 Tf
100 700 Td
(Test Business Document) Tj
ET
endstream
endobj
xref
0 5
0000000000 65535 f
0000000009 00000 n
0000000056 00000 n
0000000115 00000 n
0000000214 00000 n
trailer
<<
/Size 5
/Root 1 0 R
>>
startxref
306
%%EOF
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###############################################
### Error Cases
###############################################

### Upload without file (should return 400)
POST {{baseUrl}}/document-parsing/parse-decpage
Content-Type: multipart/form-data

###

### Upload non-PDF file (should return 400)
POST {{baseUrl}}/document-parsing/parse-decpage
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="document.txt"
Content-Type: text/plain

This is a text file, not a PDF
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### Upload file too large (> 5MB) - should return 413
# Note: This would need an actual large file
POST {{baseUrl}}/document-parsing/parse-decpage
Content-Type: multipart/form-data

# File larger than 5MB would go here

###############################################
### Expected Response Format
###############################################

# Successful response will include:
# {
#   "legalBusinessName": "BrightWorks LLC",
#   "doingBusinessAs": "BrightWorks Design",
#   "legalStructure": "llc",
#   "businessWebsite": "https://brightworksdesign.com",
#   "primaryIndustry": "Construction",
#   "businessDescription": "Commercial design and renovation services.",
#   "businessFen": "123456789",
#   "addressType": ["physical"],
#   "businessAddress": "1450 Market Street",
#   "city": "San Francisco",
#   "state": "CA",
#   "zip": 94103,
#   "hasSubsidiaries": "no",
#   "hasForeignSubsidiaries": "no",
#   "seekingMultipleEntities": "no",
#   "yearBusinessStarted": "2014",
#   "yearsUnderCurrentOwnership": "11",
#   "firstName": "Alex",
#   "lastName": "Nguyen",
#   "email": "alex@brightworks.com",
#   "phone": "+14155557890",
#   "lastYearRevenue": 1200000,
#   "estimatedCurrentYearRevenue": 1400000,
#   "lastYearExpenses": 800000,
#   "estimatedCurrentYearExpenses": 950000,
#   "numberOfEmployees": 25,
#   "numberOfPartTimeEmployees": 5,
#   "estimatedTotalPayroll": 750000,
#   "independentContractorsPayrollPercent": 10,
#   "metadata": {
#     "fileName": "business-document.pdf",
#     "fileType": "application/pdf",
#     "fileSize": 1024,
#     "parsedAt": "2025-11-10T12:00:00Z",
#     "confidence": 0.95,
#     "fileUrl": "https://s3.amazonaws.com/..."
#   }
# }

